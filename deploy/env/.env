# General
# ca cert path
NG__GENERAL__CA_CERT_PATH="./certs/ca.crt"
# ca key path
NG__GENERAL__CA_KEY_PATH="./certs/ca.key"

# Southward communication configuration
# API synchronous start wait timeout for driver connection (milliseconds)
NG__GENERAL__SOUTHWARD__DRIVER_SYNC_START_TIMEOUT_MS=2000

# Northward communication configuration
# Internal bounded queue capacity for northward manager
NG__GENERAL__NORTHWARD__QUEUE_CAPACITY=10000
# API synchronous start wait timeout for northward app (milliseconds)
NG__GENERAL__NORTHWARD__APP_SYNC_START_TIMEOUT_MS=2000
# Cache TTL for device change detection cache (in milliseconds)
NG__GENERAL__NORTHWARD__CACHE_TTL_MS=3600000

# Collector configuration
# Collection timeout for each device (in milliseconds)
NG__GENERAL__COLLECTOR__COLLECTION_TIMEOUT_MS=30000
# Metrics collection interval (in milliseconds)
NG__GENERAL__COLLECTOR__METRICS_INTERVAL_MS=60000
# Maximum concurrent collections per channel
NG__GENERAL__COLLECTOR__MAX_CONCURRENT_COLLECTIONS=200
# Retry attempts for failed collections
NG__GENERAL__COLLECTOR__RETRY_ATTEMPTS=3
# Retry delay in milliseconds
NG__GENERAL__COLLECTOR__RETRY_DELAY_MS=1000
# Outbound queue capacity from collector to gateway (bounded channel)
NG__GENERAL__COLLECTOR__OUTBOUND_QUEUE_CAPACITY=10000

# Metrics configuration
# Enable/disable metrics collection
NG__METRICS__ENABLED=false
# Metrics export endpoint
NG__METRICS__ENDPOINT="http://localhost:4317"
# Export interval in milliseconds
NG__METRICS__EXPORT_INTERVAL=60000
# Service name for metrics
NG__METRICS__SERVICE_NAME="ng"

# Web
# router prefix
NG__WEB__ROUTER_PREFIX="/api"
# host
NG__WEB__HOST="0.0.0.0"
# port
NG__WEB__PORT=5678
# gt 0 use exact number
# 0 use CPU count
# lt 0 use CPU count / abs(workers)
NG__WEB__WORKERS=0

# Web UI (single-container, served by the gateway process)
# Enable/disable UI serving.
NG__WEB__UI__ENABLED=true
# Mode: embedded_zip | filesystem | disabled
# - filesystem: serve from local directory (developer mode / Docker all-in-one)
# - embedded_zip: serve from `ng-gateway-web/ui-dist.zip` compiled into the binary (Homebrew single-binary)
NG__WEB__UI__MODE="filesystem"
# Filesystem root directory containing `index.html` and assets (Vite dist output).
NG__WEB__UI__FILESYSTEM_ROOT="/app/ui"

# Web SSL
# enabled
NG__WEB__SSL__ENABLED=true
# port
NG__WEB__SSL__PORT=8443
# type
# auto: generate or load from ca_cert_path and ca_key_path
# local: load from cert and key
NG__WEB__SSL__TYPE="auto"
# cert path
NG__WEB__SSL__CERT="./certs/cert.pem"
# key path
NG__WEB__SSL__KEY="./certs/key.pem"

# Web CORS
# Cros mode
# allow_all, whitelist
NG__WEB__CORS__MODE="allow_all"

# Web CORS Whitelist
NG__WEB__CORS__WHITELIST__ORIGINS="*"
NG__WEB__CORS__WHITELIST__METHODS="GET,POST,PUT,DELETE"
NG__WEB__CORS__WHITELIST__HEADERS="Content-Type,AccessToken,X-CSRF-Token,Authorization,Token,X-Token,X-User-Id"
NG__WEB__CORS__WHITELIST__EXPOSE_HEADERS="Content-Length,Access-Control-Allow-Origin,Access-Control-Allow-Headers,Content-Type"
NG__WEB__CORS__WHITELIST__CREDENTIALS=true

# JWT
# secret
NG__WEB__JWT__SECRET="ng-gateway"
# expire
NG__WEB__JWT__EXPIRE=3600000
# issuer
NG__WEB__JWT__ISSUER="ng-gateway"

# Cache
# type
# only moka is supported
NG__CACHE__TYPE="moka"
# prefix
NG__CACHE__PREFIX="ng-gateway"
# delimiter
NG__CACHE__DELIMITER=":"

# Database
# SQLite database file path (will be created automatically if not exists)
# Final path resolves under ./data
NG__DB__SQLITE__PATH="ng-gateway.db"
# Connection timeout in milliseconds
NG__DB__SQLITE__TIMEOUT=5000
# Idle timeout in milliseconds
NG__DB__SQLITE__IDLE_TIMEOUT=5000
# Maximum connection lifetime in milliseconds
NG__DB__SQLITE__MAX_LIFETIME=5000
# Maximum number of connections
NG__DB__SQLITE__MAX_CONNECTIONS=100
# Auto create database file and directory if not exists
NG__DB__SQLITE__AUTO_CREATE=true
